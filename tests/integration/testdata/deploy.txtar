# This test needs to be moved to the gno directory along with the contract implementation,
# as running txtar directly from the current directory is not yet supported.
#
# When running the test, place the txtar file in the `gno.land/pkg/integration/testdata` directory,
# then navigate to `integration` and run the test with `go test -v . -run TestTestdata/<file name>`.
#
# When moving the contract code, test files should not be included. This is because the `utils_test.gno` file still remains.
# The test directory configuration has been modified on the premise that it will be executed from the gno directory, not the gnoswap directory.
# The paths in `deploy.mk` are configured based on the gnoswap directory, so the contents of the two files may differ.

loadpkg gno.land/p/nt/avl
loadpkg gno.land/p/nt/ufmt
loadpkg gno.land/p/onbloc/json
loadpkg gno.land/p/nt/ownable
loadpkg gno.land/p/demo/tokens/grc20
loadpkg gno.land/p/demo/tokens/grc721
loadpkg gno.land/r/demo/defi/foo20

loadpkg gno.land/r/sys/users
loadpkg gno.land/r/gnoland/wugnot
loadpkg gno.land/r/demo/defi/grc20reg

## start a new node
gnoland start 


## deploy test-tokens

### deploy usdc
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/onbloc/usdc -pkgpath gno.land/r/onbloc/usdc -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy foo
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/onbloc/foo -pkgpath gno.land/r/onbloc/foo -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy bar
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/onbloc/bar -pkgpath gno.land/r/onbloc/bar -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy baz
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/onbloc/baz -pkgpath gno.land/r/onbloc/baz -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy qux
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/onbloc/qux -pkgpath gno.land/r/onbloc/qux -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy obl
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/onbloc/obl -pkgpath gno.land/r/onbloc/obl -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy packages

### deploy uint256
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/p/gnoswap/uint256 -pkgpath gno.land/p/gnoswap/uint256 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy int256
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/p/gnoswap/int256 -pkgpath gno.land/p/gnoswap/int256 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy gnsmath
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/p/gnoswap/gnsmath -pkgpath gno.land/p/gnoswap/gnsmath -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy rbac
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/p/gnoswap/rbac -pkgpath gno.land/p/gnoswap/rbac -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy store
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/p/gnoswap/store -pkgpath gno.land/p/gnoswap/store -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy version manager
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/p/gnoswap/version_manager -pkgpath gno.land/p/gnoswap/version_manager -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy realm

### deploy acccess
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/access -pkgpath gno.land/r/gnoswap/access -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy rbac realm
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/rbac -pkgpath gno.land/r/gnoswap/rbac -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy halt realm
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/halt -pkgpath gno.land/r/gnoswap/halt -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy common
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/common -pkgpath gno.land/r/gnoswap/common -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gns
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gns -pkgpath gno.land/r/gnoswap/gns -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gnft
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gnft -pkgpath gno.land/r/gnoswap/gnft -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gov/xgns
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gov/xgns -pkgpath gno.land/r/gnoswap/gov/xgns -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy emission
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/emission -pkgpath gno.land/r/gnoswap/emission -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy protocol_fee
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/protocol_fee -pkgpath gno.land/r/gnoswap/protocol_fee -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy pool
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/pool -pkgpath gno.land/r/gnoswap/pool -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy position
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/position -pkgpath gno.land/r/gnoswap/position -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy router
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/router -pkgpath gno.land/r/gnoswap/router -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy staker
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/staker -pkgpath gno.land/r/gnoswap/staker -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy community_pool
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/community_pool -pkgpath gno.land/r/gnoswap/community_pool -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gov/staker
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gov/staker -pkgpath gno.land/r/gnoswap/gov/staker -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gov/governance
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gov/governance -pkgpath gno.land/r/gnoswap/gov/governance -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy launchpad
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/launchpad -pkgpath gno.land/r/gnoswap/launchpad -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy referral
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/referral -pkgpath gno.land/r/gnoswap/referral -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

## deploy versioned realm (v1)

### deploy protocol_fee
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/protocol_fee/v1 -pkgpath gno.land/r/gnoswap/protocol_fee/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy pool
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/pool/v1 -pkgpath gno.land/r/gnoswap/pool/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy position
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/position/v1 -pkgpath gno.land/r/gnoswap/position/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy router
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/router/v1 -pkgpath gno.land/r/gnoswap/router/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy staker
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/staker/v1 -pkgpath gno.land/r/gnoswap/staker/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gov/staker
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gov/staker/v1 -pkgpath gno.land/r/gnoswap/gov/staker/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy gov/governance
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/gov/governance/v1 -pkgpath gno.land/r/gnoswap/gov/governance/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1

### deploy launchpad
gnokey maketx addpkg -pkgdir ../../../examples/gno.land/r/gnoswap/launchpad/v1 -pkgpath gno.land/r/gnoswap/launchpad/v1 -gas-fee 100000000ugnot -gas-wanted 100000000 -broadcast -chainid=tendermint_test test1
