loadpkg gno.land/p/nt/ufmt

## start a new node
gnoland start

gnokey maketx addpkg -pkgdir $WORK -pkgpath gno.land/r/basic -gas-fee 100000ugnot -gas-wanted 30000000 -broadcast -chainid=tendermint_test test1

# Call Empty
gnokey maketx call -pkgpath gno.land/r/basic -func Empty -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   316824'

### Only Gas Test ###
# String to Bytes Encoding
gnokey maketx call -pkgpath gno.land/r/basic -func StringToBytes -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   318187'

# Bytes to String Decoding
gnokey maketx call -pkgpath gno.land/r/basic -func BytesToString -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   318723'

# Byte Slice Creation
gnokey maketx call -pkgpath gno.land/r/basic -func CreateByteSlice -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   319675'

# Byte Slice Append
gnokey maketx call -pkgpath gno.land/r/basic -func AppendByteSlice -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   320675'

# Base64 Encoding
gnokey maketx call -pkgpath gno.land/r/basic -func Base64Encode -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   693364'

# Base64 Decoding
gnokey maketx call -pkgpath gno.land/r/basic -func Base64Decode -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   1192305'

# Ufmt Sprintf to Bytes
gnokey maketx call -pkgpath gno.land/r/basic -func UfmtSprintfToBytes -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   2826791'

# Strings Builder to Bytes
gnokey maketx call -pkgpath gno.land/r/basic -func StringsBuilderToBytes -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   1673237'

### With Storage Test ###
# String to Bytes Encoding With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func StringToBytes_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   451122'
stdout 'STORAGE FEE:    33300ugnot'

# Bytes to String Decoding With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func BytesToString_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   412910'
stdout 'STORAGE FEE:    3400ugnot'

# Byte Slice Creation With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func CreateByteSlice_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   455618'
stdout 'STORAGE FEE:    34900ugnot'

# Byte Slice Append With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func AppendByteSlice_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   458410'
stdout 'STORAGE FEE:    32300ugnot'

# Base64 Encoding With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func Base64Encode_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   792687'
stdout 'STORAGE FEE:    4500ugnot'

# Base64 Decoding With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func Base64Decode_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   1333588'
stdout 'STORAGE FEE:    32900ugnot'

# Ufmt Sprintf to Bytes With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func UfmtSprintfToBytes_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   2971918'
stdout 'STORAGE FEE:    33300ugnot'

# Strings Builder to Bytes With Storage
gnokey maketx call -pkgpath gno.land/r/basic -func StringsBuilderToBytes_With_Storage -insecure-password-stdin=true -broadcast=true -chainid=tendermint_test -gas-fee 1000000ugnot -gas-wanted 1000000000 -memo "" test1
stdout 'GAS USED:   1820542'
stdout 'STORAGE FEE:    33300ugnot'

-- gnomod.toml --
module = "gno.land/r/basic"
gno = "0.9"
-- main.gno --
package basic

import (
	"encoding/base64"
	"strings"

	"gno.land/p/nt/ufmt"
)

func StringToBytes(cur realm) {
	str := "Hello, Gno!"
	result := []byte(str)
	_ = result
}

func BytesToString(cur realm) {
	bytes := []byte{72, 101, 108, 108, 111}
	result := string(bytes)
	_ = result
}

func CreateByteSlice(cur realm) {
	result := make([]byte, 32)
	_ = result
}

func AppendByteSlice(cur realm) {
	slice := []byte{1, 2, 3}
	result := append(slice, 4, 5, 6)
	_ = result
}

func Base64Encode(cur realm) {
	data := []byte("Hello, Gno!")
	result := base64.StdEncoding.EncodeToString(data)
	_ = result
}

func Base64Decode(cur realm) {
	encoded := "SGVsbG8sIEdubyek="
	result, _ := base64.StdEncoding.DecodeString(encoded)
	_ = result
}

func UfmtSprintfToBytes(cur realm) {
	formatted := ufmt.Sprintf("Value: %d", 12345)
	result := []byte(formatted)
	_ = result
}

func StringsBuilderToBytes(cur realm) {
	var builder strings.Builder
	builder.WriteString("Hello")
	builder.WriteString(", ")
	builder.WriteString("Gno!")
	result := []byte(builder.String())
	_ = result
}

var (
	resultStringBytes   []byte
	resultBytesString   string
	resultByteSlice     []byte
	resultAppendBytes   []byte
	resultBase64Encode  string
	resultBase64Decode  []byte
	resultUfmtBytes     []byte
	resultBuilderBytes  []byte
)

func StringToBytes_With_Storage(cur realm) {
	str := "Hello, Gno!"
	resultStringBytes = []byte(str)
}

func BytesToString_With_Storage(cur realm) {
	bytes := []byte{72, 101, 108, 108, 111}
	resultBytesString = string(bytes)
}

func CreateByteSlice_With_Storage(cur realm) {
	resultByteSlice = make([]byte, 32)
}

func AppendByteSlice_With_Storage(cur realm) {
	slice := []byte{1, 2, 3}
	resultAppendBytes = append(slice, 4, 5, 6)
}

func Base64Encode_With_Storage(cur realm) {
	data := []byte("Hello, Gno!")
	resultBase64Encode = base64.StdEncoding.EncodeToString(data)
}

func Base64Decode_With_Storage(cur realm) {
	encoded := "SGVsbG8sIEdubyek="
	resultBase64Decode, _ = base64.StdEncoding.DecodeString(encoded)
}

func UfmtSprintfToBytes_With_Storage(cur realm) {
	formatted := ufmt.Sprintf("Value: %d", 12345)
	resultUfmtBytes = []byte(formatted)
}

func StringsBuilderToBytes_With_Storage(cur realm) {
	var builder strings.Builder
	builder.WriteString("Hello")
	builder.WriteString(", ")
	builder.WriteString("Gno!")
	resultBuilderBytes = []byte(builder.String())
}

func Empty(cur realm) {
	return
}
